/* --- GLOBAL --- */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; outline: none !important; -webkit-tap-highlight-color: transparent; }
body { background-color: #000000; color: white; height: 100vh; display: flex; justify-content: center; overflow: hidden; }

.main-container { width: 100%; height: 100vh; display: flex; flex-direction: column; background: #000000; position: relative; }

/* --- HEADER --- */
header { padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; height: 54px; z-index: 50; background: #000000; border-bottom: 1px solid #1a1a1a; }
.brand-logo { height: 28px; width: auto; max-width: 65%; object-fit: contain; }
.header-icon { font-size: 1.3rem; cursor: pointer; padding: 8px; color: #b0b0b0; }

/* --- CHAT AREA --- */
#chat-stream { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 20px; padding-bottom: 100px; }
.msg-row { display: flex; width: 100%; animation: fadeUp 0.3s ease; }
@keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.row-user { justify-content: flex-end; }
.row-bot { justify-content: flex-start; }

.bubble { max-width: 88%; padding: 12px 18px; font-size: 0.95rem; line-height: 1.6; border-radius: 18px; word-wrap: break-word; position: relative; }
.bub-user { background: #262626; color: white; border-top-right-radius: 4px; }
.bub-bot { background: transparent; color: #e0e0e0; padding-left: 0; }

/* --- MARKDOWN STYLING --- */
.bubble p { margin-bottom: 10px; } 
.bubble p:last-child { margin-bottom: 0; }
.bubble strong { color: #ffffff; font-weight: 600; }
.bubble h3 { font-size: 1.1rem; font-weight: 600; color: #ffd700; margin-top: 15px; margin-bottom: 8px; }
.bubble ul, .bubble ol { margin-left: 20px; margin-bottom: 10px; }
.bubble li { margin-bottom: 6px; padding-left: 5px; }
.bubble pre { background: #1a1a1a; padding: 10px; border-radius: 8px; overflow-x: auto; margin: 10px 0; border: 1px solid #333; }
.bubble code { font-family: monospace; color: #ff79c6; background: rgba(255,255,255,0.1); padding: 2px 4px; border-radius: 4px; }
.bubble img { width: 100%; border-radius: 12px; margin-top: 10px; border: 1px solid #333; cursor: zoom-in; }

/* --- FOOTER --- */
footer { position: absolute; bottom: 0; width: 100%; padding: 10px 12px 20px 12px; background: rgba(0,0,0,0.9); z-index: 9999; backdrop-filter: blur(5px); }

.input-zone { display: flex; align-items: flex-end; gap: 8px; position: relative; z-index: 10000; }

/* Buttons */
.btn-round { width: 44px; height: 44px; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; font-size: 1.2rem; cursor: pointer; flex-shrink: 0; background: #262626; color: #a0a0a0; transition: 0.2s; pointer-events: auto; }

.btn-round:active { transform: scale(0.9); background: #333; }

/* Text Area */
.text-capsule { flex: 1; background: #262626; border-radius: 24px; padding: 10px 15px; display: flex; align-items: center; min-height: 44px; border: 1px solid transparent; transition: 0.3s; }
.text-capsule:focus-within { border-color: #444; background: #2a2a2a; }

input { flex: 1; background: transparent; border: none; color: white; font-size: 1rem; min-width: 0; pointer-events: auto; }

.icon-mic { padding: 8px; cursor: pointer; font-size: 1.1rem; color: #a0a0a0; transition: 0.2s; }
.icon-mic.active { color: #ff4757; transform: scale(1.1); text-shadow: 0 0 10px #ff4757; }

/* --- FIX: Button Send Styling --- */
/* Pehle yahan pointer-events: none tha, jo button ko lock kar raha tha. Ab hata diya hai. */
.btn-send { background: #444; color: rgba(255,255,255,0.3); pointer-events: auto; cursor: pointer; }
.btn-send.ready { background: #ffffff; color: black; pointer-events: auto; opacity: 1; }

/* Modal */
.modal-overlay { display: none; position: fixed; z-index: 10000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; }
.modal-img { max-width: 100%; max-height: 100%; object-fit: contain; }
    position: absolute; bottom: 0; width: 100%; 
    padding: 10px 12px 20px 12px; background: rgba(0,0,0,0.9); 
    z-index: 9999; /* Critical */
    backdrop-filter: blur(5px); 
}

.input-zone { display: flex; align-items: flex-end; gap: 8px; }

.btn-round { 
    width: 44px; height: 44px; border-radius: 50%; border: none; 
    display: flex; justify-content: center; align-items: center; 
    font-size: 1.2rem; cursor: pointer; flex-shrink: 0;
    background: #262626; color: #a0a0a0; 
    transition: 0.2s;
    pointer-events: auto; /* Force Clickable */
}
.btn-round:active { transform: scale(0.9); background: #333; }

.text-capsule { 
    flex: 1; background: #262626; border-radius: 24px; 
    padding: 10px 15px; display: flex; align-items: center; 
    min-height: 44px; border: 1px solid transparent; 
    transition: 0.3s;
}

input { flex: 1; background: transparent; border: none; color: white; font-size: 1rem; min-width: 0; }

.icon-mic { 
    padding: 8px; cursor: pointer; font-size: 1.1rem; color: #a0a0a0; 
    transition: 0.2s; 
    pointer-events: auto; /* Force Clickable */
    z-index: 10000;
}
.icon-mic.active { color: #ff4757; transform: scale(1.1); text-shadow: 0 0 10px #ff4757; }

/* Send button initially disabled visual only */
.btn-send { background: #444; color: rgba(255,255,255,0.3); }
.btn-send.ready { background: #ffffff; color: black; }

/* Modal */
.modal-overlay { display: none; position: fixed; z-index: 10000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; }
.modal-img { max-width: 100%; max-height: 100%; object-fit: contain; }
.input-zone { display: flex; align-items: flex-end; gap: 8px; }
.btn-round { width: 44px; height: 44px; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; font-size: 1.2rem; cursor: pointer; flex-shrink: 0; background: #262626; color: #a0a0a0; transition: 0.2s; }
.btn-round:active { transform: scale(0.9); background: #333; }
.text-capsule { flex: 1; background: #262626; border-radius: 24px; padding: 10px 15px; display: flex; align-items: center; min-height: 44px; border: 1px solid transparent; transition: 0.3s; }
.text-capsule:focus-within { border-color: #444; background: #2a2a2a; }
input { flex: 1; background: transparent; border: none; color: white; font-size: 1rem; min-width: 0; }
.icon-mic { padding: 8px; cursor: pointer; font-size: 1.1rem; color: #a0a0a0; transition: 0.2s; }
.icon-mic.active { color: #ff4757; transform: scale(1.1); text-shadow: 0 0 10px #ff4757; }
.btn-send { background: #444; color: rgba(255,255,255,0.3); pointer-events: none; }
.btn-send.ready { background: #ffffff; color: black; pointer-events: auto; }

/* Modal */
.modal-overlay { display: none; position: fixed; z-index: 10000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; }
.modal-img { max-width: 100%; max-height: 100%; object-fit: contain; }

/* Footer (Inputs) */
footer { 
    position: absolute; bottom: 0; width: 100%; 
    padding: 10px 12px 20px 12px; background: #000000; 
    z-index: 9999; /* Critical for button clicks */
}

.input-zone { display: flex; align-items: flex-end; gap: 8px; }

.btn-round { 
    width: 44px; height: 44px; border-radius: 50%; border: none; 
    display: flex; justify-content: center; align-items: center; 
    font-size: 1.2rem; cursor: pointer; flex-shrink: 0;
    background: #2F2F2F; color: #b4b4b4; 
    transition: transform 0.1s;
}
.btn-round:active { transform: scale(0.95); }

.text-capsule { 
    flex: 1; background: #2F2F2F; border-radius: 24px; 
    padding: 8px 12px; display: flex; align-items: center; 
    min-height: 44px; 
}

input { flex: 1; background: transparent; border: none; color: white; font-size: 1rem; min-width: 0; }
.icon-mic { padding: 8px; cursor: pointer; font-size: 1.1rem; color: white; }
.icon-mic.active { color: #ff4757; }

.btn-send { background: #676767; color: rgba(255,255,255,0.4); }
.btn-send.ready { background: white; color: black; }

/* Modal */
.modal-overlay { display: none; position: fixed; z-index: 10000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; }
.modal-img { max-width: 100%; max-height: 100%; object-fit: contain; }
             
